<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TMDb Post Generator (Movies & Series)</title>
<link rel="stylesheet" href="https://dktczn.github.io/Dk/cdn/vgpost.css">
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<style>
body {font-family: Arial, sans-serif; background:#111; color:#fff; padding:20px;}
label {display:block; margin-top:10px; font-weight:bold;}
input, textarea {width:100%; padding:8px; margin-top:5px; border-radius:5px; border:none;}
button {margin-top:15px; padding:10px 15px; border:none; border-radius:5px; cursor:pointer;}
#generate {background:#28a745; color:#fff;}
#copy {background:#007bff; color:#fff; margin-left:10px;}
#output {margin-top:20px; white-space: pre-wrap; background:#222; padding:15px; border-radius:10px;}
.post img {max-width:100px; margin:5px;}
.download-btn {margin-bottom:10px;}
</style>
</head>
<body>

<h1>TMDb Post Generator</h1>

<label>TMDb ID (Movie or Series)</label>
<input type="text" id="tmdbId" placeholder="Enter TMDb ID">

<!-- Auto-fill / Manual edit fields -->
<label>Title</label><input type="text" id="title">
<label>Description</label><textarea id="description" rows="3"></textarea>
<label>IMDb Rating</label><input type="text" id="rating">
<label>Release Year</label><input type="text" id="year">
<label>Language</label><input type="text" id="language">
<label>Quality</label><input type="text" id="quality">
<label>File Size</label><input type="text" id="filesize">
<label>Format</label><input type="text" id="format">
<label>Starcast</label><input type="text" id="starcast">
<label>Duration</label><input type="text" id="duration">
<label>Season</label><input type="text" id="season">
<label>Genres</label><input type="text" id="genres">
<label>Screenshots URLs (comma separated)</label><textarea id="screenshots" rows="3"></textarea>

<!-- Individual Download Buttons -->
<h3>Download Buttons</h3>
<div class="download-btn">
  <label>Button 1 Label</label><input type="text" id="btn1Label" placeholder="480p">
  <label>Button 1 URL</label><input type="text" id="btn1Url" placeholder="#">
</div>
<div class="download-btn">
  <label>Button 2 Label</label><input type="text" id="btn2Label" placeholder="720p">
  <label>Button 2 URL</label><input type="text" id="btn2Url" placeholder="#">
</div>
<div class="download-btn">
  <label>Button 3 Label</label><input type="text" id="btn3Label" placeholder="1080p">
  <label>Button 3 URL</label><input type="text" id="btn3Url" placeholder="#">
</div>
<div class="download-btn">
  <label>Button 4 Label</label><input type="text" id="btn4Label" placeholder="4K">
  <label>Button 4 URL</label><input type="text" id="btn4Url" placeholder="#">
</div>
<div class="download-btn">
  <label>Button 5 Label</label><input type="text" id="btn5Label" placeholder="8K">
  <label>Button 5 URL</label><input type="text" id="btn5Url" placeholder="#">
</div>

<button id="generate">Generate Post</button>
<button id="copy">Copy HTML</button>

<pre id="output"></pre>

<script>
const TMDB_API_KEY = 'YOUR_TMDB_API_KEY'; // Replace with your TMDb API Key

async function fetchTMDb(id) {
    let data, type;
    try {
        let res = await fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${TMDB_API_KEY}&append_to_response=credits,images`);
        data = await res.json();
        type = 'movie';
        if(data.status_code) throw "Not a movie";
    } catch {
        let res = await fetch(`https://api.themoviedb.org/3/tv/${id}?api_key=${TMDB_API_KEY}&append_to_response=credits,images`);
        data = await res.json();
        type = 'tv';
        if(data.status_code) { alert("Invalid TMDb ID"); return; }
    }
    return {data, type};
}

// Auto-fill on TMDb ID change
document.getElementById('tmdbId').addEventListener('change', async ()=>{
    const id = document.getElementById('tmdbId').value.trim();
    if(!id) return;
    const {data, type} = await fetchTMDb(id);

    document.getElementById('title').value = data.title || data.name;
    document.getElementById('description').value = data.overview || '';
    document.getElementById('rating').value = data.vote_average || '';
    document.getElementById('year').value = (type==='movie' ? (data.release_date || '').split('-')[0] : (data.first_air_date || '').split('-')[0]) || '';
    document.getElementById('language').value = data.original_language || '';
    document.getElementById('starcast').value = (data.credits.cast || []).slice(0,6).map(c=>c.name).join(', ');
    document.getElementById('duration').value = type==='movie' ? (data.runtime ? data.runtime+' min' : '') : (data.episode_run_time.length>0 ? data.episode_run_time[0]+' min/ep' : '');
    document.getElementById('season').value = type==='tv' ? (data.number_of_seasons + ' Seasons') : '';
    document.getElementById('genres').value = (data.genres || []).map(g => g.name).join(', ');
    document.getElementById('screenshots').value = (data.images.backdrops || []).slice(0,6).map(i=>`https://image.tmdb.org/t/p/w500${i.file_path}`).join(',');
    // Fill default button labels
    document.getElementById('btn1Label').value = '480p';
    document.getElementById('btn2Label').value = '720p';
    document.getElementById('btn3Label').value = '1080p';
    document.getElementById('btn4Label').value = '4K';
    document.getElementById('btn5Label').value = '8K';
});

// Generate HTML
document.getElementById('generate').addEventListener('click', ()=>{
    const title = document.getElementById('title').value;
    const desc = document.getElementById('description').value;
    const rating = document.getElementById('rating').value;
    const year = document.getElementById('year').value;
    const lang = document.getElementById('language').value;
    const quality = document.getElementById('quality').value;
    const filesize = document.getElementById('filesize').value;
    const format = document.getElementById('format').value;
    const starcast = document.getElementById('starcast').value;
    const duration = document.getElementById('duration').value;
    const season = document.getElementById('season').value;
    const genres = document.getElementById('genres').value;
    const screenshots = document.getElementById('screenshots').value.split(',').map(s=>s.trim());

    const btns = [
        {label: document.getElementById('btn1Label').value, url: document.getElementById('btn1Url').value},
        {label: document.getElementById('btn2Label').value, url: document.getElementById('btn2Url').value},
        {label: document.getElementById('btn3Label').value, url: document.getElementById('btn3Url').value},
        {label: document.getElementById('btn4Label').value, url: document.getElementById('btn4Url').value},
        {label: document.getElementById('btn5Label').value, url: document.getElementById('btn5Url').value}
    ];

    const html = `
<div class="post dkpost">
  <h2 style="color:yellow;">${title}</h2>
  <p>${desc}</p>
  <h3 style="color:#ff8800;">Movie/TV Info:</h3>
  <ul>
      <li><b>IMDb Rating:</b> ${rating}</li>
      <li><b>Release Year:</b> ${year}</li>
      <li><b>Language:</b> ${lang}</li>
      <li><b>Quality:</b> ${quality}</li>
      <li><b>File Size:</b> ${filesize}</li>
      <li><b>Format:</b> ${format}</li>
      <li><b>Starcast:</b> ${starcast}</li>
      <li><b>Duration:</b> ${duration}</li>
      <li><b>Season:</b> ${season}</li>
  </ul>
  <h2>Tags:</h2><p>${genres}</p>
  <h3>Screenshots must see before downloading</h3>
  ${screenshots.map(s=>`<img src="${s}">`).join('')}
  <h3>Download this movie/series</h3>
  ${btns.map((b,i)=>`<a href="${b.url||'#'}" class="dbtn dbtn${i+1}"><i class="fa-solid fa-download"></i>âš¡${b.label}</a>`).join('')}
</div>
    `;

    document.getElementById('output').textContent = html;
});

// Copy HTML
document.getElementById('copy').addEventListener('click', ()=>{
    const output = document.getElementById('output');
    navigator.clipboard.writeText(output.textContent).then(()=>alert('Copied to clipboard!'));
});
</script>

</body>
</html>
